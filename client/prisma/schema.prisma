generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DEV_DATABASE_URL")
}

model User {
  id       String        @id @unique
  email    String     @unique
  username String     @unique
  hashed_password String
  UserList UserList[]
  Session Session?
  @@map("user")
}

model Session {
  id        String   @id
  userId    String @unique
  expiresAt DateTime
  user      User    @relation(fields: [userId], references: [id])
  @@map("session")
}

model UserList {
  id        Int     @id @default(autoincrement())
  userId    String @unique 
  user      User    @relation(fields: [userId], references: [id])
  animelist Anime[] 
  @@map("user_list")
}

model Seasons {
  id        Int     @id @default(autoincrement())
  seasonYearCategory String @unique
  season    String 
  year      Int
  anime     Anime[] 
  updatedAt DateTime
  category String 
  @@map("seasons")
}

model Anime {
  id        Int    @id @unique
  seasonInfo Seasons @relation(fields: [entry], references: [seasonYearCategory])
  entry     String
  userList UserList[] 
  category String 
  season  String 
  year   Int
  title   String?
  episodes Int?
  genres Json?
  score Float?
  synopsis String?
  studios Json?
  source String?
  images String?
  members Int
  broadcast Json?
  aired Json?
  isCurrentlyAiring String
  isPrevSeason Boolean
  @@map("anime")
}